{"remainingRequest":"/Users/mac/Desktop/projects/shop/tutorial_online_shop/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/Desktop/projects/shop/tutorial_online_shop/src/components/main-page/v-main-page.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mac/Desktop/projects/shop/tutorial_online_shop/src/components/main-page/v-main-page.vue","mtime":1618871123331},{"path":"/Users/mac/Desktop/projects/shop/tutorial_online_shop/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Desktop/projects/shop/tutorial_online_shop/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/mac/Desktop/projects/shop/tutorial_online_shop/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Desktop/projects/shop/tutorial_online_shop/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCiAgaW1wb3J0IHttYXBBY3Rpb25zLCBtYXBHZXR0ZXJzfSBmcm9tICd2dWV4JwoKICBleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAidi1tYWluLXBhZ2UiLAogICAgcHJvcHM6IHt9LAogICAgZGF0YSgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBjYXRlZ29yaWVzOiBbCiAgICAgICAgICAgIHsgaWQ6IDEsIGNhdGVnb3J5OiAn0J3QvtGD0YLQsdGD0LrQuCcgfSwKICAgICAgICAgICAgeyBpZDogMiwgY2F0ZWdvcnk6ICfQodC80LDRgNGC0YTQvtC90YsnIH0sCiAgICAgICAgICAgIHsgaWQ6IDMsIGNhdGVnb3J5OiAn0JLQuNC00LXQvtC60LDRgNGC0YsnIH0KICAgICAgICBdLAogICAgICAgIGJyYW5kczogWwogICAgewogICAgICAgICJpZCI6ICIxIiwKICAgICAgICAiYnJhbmQiOiAiQXBwbGUiCiAgICB9LAogICAgewogICAgICAgICJpZCI6ICIyIiwKICAgICAgICAiYnJhbmQiOiAiU2Ftc3VuZyIKICAgIH0sCiAgICB7CiAgICAgICAgImlkIjogIjMiLAogICAgICAgICJicmFuZCI6ICJBY2VyIgogICAgfSwKICAgIHsKICAgICAgICAiaWQiOiAiNCIsCiAgICAgICAgImJyYW5kIjogIkxlbm92byIKICAgIH0sCiAgICB7CiAgICAgICAgImlkIjogIjUiLAogICAgICAgICJicmFuZCI6ICJBc3VzIgogICAgfSwKICAgIHsKICAgICAgICAiaWQiOiAiNiIsCiAgICAgICAgImJyYW5kIjogIkdpZ2FieXRlIgogICAgfQpdLAogICAgICAgIHNvcnRSdWxlczogWwogICAgICAgICAgICB7IGtleSA6J2dvb2RfaWQ6YXNjJywgdGl0bGU6ICfQn9C+INC/0L7RgNGP0LTQutGDJyB9LAogICAgICAgICAgICB7IGtleSA6J3JhdGluZzpkZXNjJywgdGl0bGU6ICfQn9C+INGA0LXQudGC0LjQvdCz0YMnIH0sCiAgICAgICAgICAgIHsga2V5IDoncHJpY2U6YXNjJywgdGl0bGU6ICfQn9C+INGG0LXQvdC1LCDRgdC90LDRh9Cw0LvQsCDQtNC10YjQtdCy0YvQtScgfSwKICAgICAgICAgICAgeyBrZXkgOidwcmljZTpkZXNjJywgdGl0bGU6ICfQn9C+INGG0LXQvdC1LCDRgdC90LDRh9Cw0LvQsCDQtNC+0YDQvtCz0LjQtScgfQogICAgICAgIF0sCiAgICAgICAgaW5wdXRTZWFyY2g6ICcnLAogfX0sCiAgICBjb21wdXRlZDogewogICAgICAuLi5tYXBHZXR0ZXJzKFsKICAgICAgICAnUFJPRFVDVFMxJywKICAgICAgXSksCiAgICAgICAgZmlsdGVyZWRQcm9kdWN0czogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHZhciBmaWx0ZXJlZCA9IHRoaXMucHJvZHVjdHMKICAgICAgICAgICAgICAgIC5maWx0ZXIocHJvZHVjdCA9PiB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0Q2F0ZWdvcnkgPT0gJ9CS0YHQtScgfHwgcHJvZHVjdC5jYXRlZ29yeSA9PSB0aGlzLnNlbGVjdENhdGVnb3J5OwogICAgICAgICAgICAgICAgfSkKCiAgICAgICAgICAgICAgICAuZmlsdGVyKHByb2R1Y3QgPT4gewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdEJyYW5kID09IDAgfHwgcHJvZHVjdC5icmFuZCA9PSB0aGlzLnNlbGVjdEJyYW5kOwogICAgICAgICAgICAgICAgfSkKCgogICAgICAgICAgICAgICAgLmZpbHRlcihwcm9kdWN0ID0+IHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gTnVtYmVyKHByb2R1Y3QucHJpY2UpID49IHRoaXMubWluUHJpY2UgJiYgTnVtYmVyKHByb2R1Y3QucHJpY2UpIDw9IHRoaXMubWF4UHJpY2U7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICByZXR1cm4gZmlsdGVyZWQKICAgICAgICB9LAogICAgfSwKICAgIG1vdW50ZWQoKSB7CiAgICAgIHRoaXMuR0VUX1BST0RVQ1RTMV9GUk9NX0FQSSgpCiAgICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhKSB7CiAgICAgICAgICAgIHRoaXMuc29ydEJ5Q2F0ZWdvcmllcygpCiAgICAgICAgICAgIHRoaXMuc29ydFByb2R1Y3RzQnlTZWFyY2hWYWx1ZSh0aGlzLlNFQVJDSF9WQUxVRSkKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICB0aGlzLm1pblByaWNlID0gTWF0aC5taW4uYXBwbHkoTWF0aCwgdGhpcy5nZXRNaW5QcmljZSgpKTsKICAgICAgdGhpcy5tYXhQcmljZSA9IE1hdGgubWF4LmFwcGx5KE1hdGgsIHRoaXMuZ2V0TWF4UHJpY2UoKSk7CiAgICB9LAogICAgbWV0aG9kczogewoKICAgICAgLi4ubWFwQWN0aW9ucyhbCiAgICAgICAgJ0dFVF9QUk9EVUNUUzFfRlJPTV9BUEknLAogICAgICBdKSwKICAgICAgICBnZXRNaW5QcmljZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5wcm9kdWN0cy5tYXAoKGl0ZW0pID0+IHsKICAgICAgICAgICAgcmV0dXJuIGl0ZW0ucHJpY2UgfSkKICAgICAgICB9LAogICAgICAgIGdldE1heFByaWNlOiBmdW5jdGlvbigpIHsKICAgICAgICAgIHJldHVybiB0aGlzLnByb2R1Y3RzLm1hcCgoaXRlbSkgPT4gewogICAgICAgICAgICByZXR1cm4gaXRlbS5wcmljZSB9KQogICAgICAgIH0sCiAgICAgICAgY2xlYXI6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICB0aGlzLmlucHV0U2VhcmNoID0gJyc7CiAgICAgICAgICAgIHRoaXMuc2VsZWN0Q2F0ZWdvcnkgPSAwOwogICAgICAgICAgICB0aGlzLnNlbGVjdEJyYW5kID0gMDsKICAgICAgICAgICAgdGhpcy5taW5QcmljZSA9IE1hdGgubWluLmFwcGx5KE1hdGgsIHRoaXMuZ2V0TWluUHJpY2UoKSk7CiAgICAgICAgICAgIHRoaXMubWF4UHJpY2UgPSBNYXRoLm1heC5hcHBseShNYXRoLCB0aGlzLmdldE1heFByaWNlKCkpOwogICAgICAgIH0KICAgIH0KICB9CiAgCg=="},{"version":3,"sources":["v-main-page.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8DA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"v-main-page.vue","sourceRoot":"src/components/main-page","sourcesContent":["<template>\n  <div class='v-main-page'>\n    <h1>Online-shop</h1>\n    <p>\n      <router-link :to=\"{name: 'catalog'}\">\n        to Catalog\n      </router-link>\n    </p>\n                <div class=\"row\">\n                <div class=\"col-sm-1\"></div>\n                <div class=\"col-sm-10\">\n                    <h1>Список товаров</h1>\n\n                    <select v-model=\"selectCategory\">\n                        <option value=\"0\">Все категории</option>\n                        <option v-for=\"category in categories\" :key=\"category.id\" :value=\"category.category\">{{ category.category }}</option>\n                    </select>\n\n                    <select v-model=\"selectBrand\">\n                        <option value=\"0\">Все бренды</option>\n                        <option v-for=\"brand in brands\" :key=\"brand.id\" :value=\"brand.brand\">{{ brand.brand }}</option>\n                    </select>\n\n                    <label>Фильтр по цене</label>\n                    <input v-model.number=\"minPrice\" type=\"number\" />\n                    <input v-model.number=\"maxPrice\" type=\"number\" />\n\n                    <input v-model.trim=\"inputSearch\" type=\"text\" placeholder=\"Поиск по названию товара\" />\n\n                    <select v-model=\"selectSort\">\n                        <option v-for=\"rule in sortRules\" :key=\"rule.key\" :value=\"rule.key\">{{ rule.title }}</option>\n                    </select>\n\n                    <button @click=\"clear\" class=\"primary small\">Сбросить фильтры</button>\n\n                    <table>\n                        <thead>\n                            <tr>\n                                <th>Id</th>\n                                <th>Название</th>\n                                <th>Бренд</th>\n                                <th>Цена</th>\n                                <th>Рейтинг</th>\n                            </tr>\n                        </thead>\n                    </table>\n                            <ul\n                                v-for=\"product in filteredProducts\"\n                                :key=\"product.good_id\"\n                            >\n            {{ product.good_id }}\n            {{ product.good }}\n            {{ product.brand }}\n            {{ product.price }}\n            {{ product.rating }}\n        </ul>\n                </div>\n            </div>\n  </div>\n</template>\n\n<script>\n  import {mapActions, mapGetters} from 'vuex'\n\n  export default {\n    name: \"v-main-page\",\n    props: {},\n    data() {\n      return {\n        categories: [\n            { id: 1, category: 'Ноутбуки' },\n            { id: 2, category: 'Смартфоны' },\n            { id: 3, category: 'Видеокарты' }\n        ],\n        brands: [\n    {\n        \"id\": \"1\",\n        \"brand\": \"Apple\"\n    },\n    {\n        \"id\": \"2\",\n        \"brand\": \"Samsung\"\n    },\n    {\n        \"id\": \"3\",\n        \"brand\": \"Acer\"\n    },\n    {\n        \"id\": \"4\",\n        \"brand\": \"Lenovo\"\n    },\n    {\n        \"id\": \"5\",\n        \"brand\": \"Asus\"\n    },\n    {\n        \"id\": \"6\",\n        \"brand\": \"Gigabyte\"\n    }\n],\n        sortRules: [\n            { key :'good_id:asc', title: 'По порядку' },\n            { key :'rating:desc', title: 'По рейтингу' },\n            { key :'price:asc', title: 'По цене, сначала дешевые' },\n            { key :'price:desc', title: 'По цене, сначала дорогие' }\n        ],\n        inputSearch: '',\n }},\n    computed: {\n      ...mapGetters([\n        'PRODUCTS1',\n      ]),\n        filteredProducts: function() {\n            var filtered = this.products\n                .filter(product => {\n                    return this.selectCategory == 'Все' || product.category == this.selectCategory;\n                })\n\n                .filter(product => {\n                    return this.selectBrand == 0 || product.brand == this.selectBrand;\n                })\n\n\n                .filter(product => {\n                    return Number(product.price) >= this.minPrice && Number(product.price) <= this.maxPrice;\n                })\n            return filtered\n        },\n    },\n    mounted() {\n      this.GET_PRODUCTS1_FROM_API()\n             .then((response) => {\n          if (response.data) {\n            this.sortByCategories()\n            this.sortProductsBySearchValue(this.SEARCH_VALUE)\n          }\n        })\n      this.minPrice = Math.min.apply(Math, this.getMinPrice());\n      this.maxPrice = Math.max.apply(Math, this.getMaxPrice());\n    },\n    methods: {\n\n      ...mapActions([\n        'GET_PRODUCTS1_FROM_API',\n      ]),\n        getMinPrice: function() {\n          return this.products.map((item) => {\n            return item.price })\n        },\n        getMaxPrice: function() {\n          return this.products.map((item) => {\n            return item.price })\n        },\n        clear: function() {\n            this.inputSearch = '';\n            this.selectCategory = 0;\n            this.selectBrand = 0;\n            this.minPrice = Math.min.apply(Math, this.getMinPrice());\n            this.maxPrice = Math.max.apply(Math, this.getMaxPrice());\n        }\n    }\n  }\n  \n</script>\n\n<style scoped>\n\n</style>\n"]}]}