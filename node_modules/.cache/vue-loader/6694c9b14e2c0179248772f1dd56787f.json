{"remainingRequest":"/Users/mac/Desktop/projects/shop/tutorial_online_shop/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/Desktop/projects/shop/tutorial_online_shop/src/components/catalog/v-catalog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mac/Desktop/projects/shop/tutorial_online_shop/src/components/catalog/v-catalog.vue","mtime":1618571744696},{"path":"/Users/mac/Desktop/projects/shop/tutorial_online_shop/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Desktop/projects/shop/tutorial_online_shop/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/mac/Desktop/projects/shop/tutorial_online_shop/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Desktop/projects/shop/tutorial_online_shop/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB2Q2F0YWxvZ0l0ZW0gZnJvbSAnLi92LWNhdGFsb2ctaXRlbScKaW1wb3J0IHttYXBBY3Rpb25zLCBtYXBHZXR0ZXJzfSBmcm9tICd2dWV4JwppbXBvcnQgdlNlbGVjdCBmcm9tICcuLi92LXNlbGVjdCcKaW1wb3J0IHZOb3RpZmljYXRpb24gZnJvbSAnLi4vbm90aWZpY2F0aW9ucy92LW5vdGlmaWNhdGlvbicKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAidi1jYXRhbG9nIiwKICBjb21wb25lbnRzOiB7CiAgICB2Q2F0YWxvZ0l0ZW0sCiAgICB2U2VsZWN0LAogICAgdk5vdGlmaWNhdGlvbgogIH0sCiAgcHJvcHM6IHt9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjYXRlZ29yaWVzOiBbCiAgICAgICAge25hbWU6ICfQktGB0LUnLCB2YWx1ZTogJ0FMTCd9LAogICAgICAgIHtuYW1lOiAn0JzRg9C20YHQutC40LUnLCB2YWx1ZTogJ9C8J30sCiAgICAgICAge25hbWU6ICfQltC10L3RgdC60LjQtScsIHZhbHVlOiAn0LYnfSwKICAgICAgXSwKICAgICAgc2VsZWN0ZWQ6ICfQktGB0LUnLAogICAgICBzb3J0ZWRQcm9kdWN0czogW10sCiAgICAgIG1pblByaWNlOiAwLAogICAgICBtYXhQcmljZTogMTAwMDAsCiAgICAgIG1lc3NhZ2VzOiBbXSwKICAgICAgY2hlY2tlZFNpemU6IFtdCiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyhbCiAgICAgICdQUk9EVUNUUycsCiAgICAgICdDQVJUJywKICAgICAgJ0lTX01PQklMRScsCiAgICAgICdJU19ERVNLVE9QJywKICAgICAgJ1NFQVJDSF9WQUxVRScKICAgIF0pLAogICAgZmlsdGVyZWRQcm9kdWN0cygpIHsKICAgICAgaWYgKHRoaXMuc29ydGVkUHJvZHVjdHMubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuc29ydGVkUHJvZHVjdHMKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gdGhpcy5QUk9EVUNUUwogICAgICB9CiAgICB9LAogIH0sCiAgbWV0aG9kczogewogICAgLi4ubWFwQWN0aW9ucyhbCiAgICAgICdHRVRfUFJPRFVDVFNfRlJPTV9BUEknLAogICAgICAnQUREX1RPX0NBUlQnCiAgICBdKSwKICAgIHByb2R1Y3RDbGljayhhcnRpY2xlKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCB7bmFtZTogJ3Byb2R1Y3QnLCBxdWVyeTogeyAncHJvZHVjdCc6IGFydGljbGUgfX0pCiAgICB9LAogICAgc2V0UmFuZ2VTbGlkZXIoKSB7CiAgICAgIGlmICh0aGlzLm1pblByaWNlID4gdGhpcy5tYXhQcmljZSkgewogICAgICAgIGxldCB0bXAgPSB0aGlzLm1heFByaWNlOwogICAgICAgIHRoaXMubWF4UHJpY2UgPSB0aGlzLm1pblByaWNlOwogICAgICAgIHRoaXMubWluUHJpY2UgPSB0bXA7CiAgICAgIH0KICAgICAgdGhpcy5zb3J0QnlDYXRlZ29yaWVzKCkKICAgIH0sCiAgICBzb3J0QnlDYXRlZ29yaWVzKGNhdGVnb3J5KSB7CiAgICAgIGxldCB2bSA9IHRoaXM7CiAgICAgIHRoaXMuc29ydGVkUHJvZHVjdHMgPSBbLi4udGhpcy5QUk9EVUNUU10KICAgICAgdGhpcy5zb3J0ZWRQcm9kdWN0cyA9IHRoaXMuc29ydGVkUHJvZHVjdHMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIGl0ZW0ucHJpY2UgPj0gdm0ubWluUHJpY2UgJiYgaXRlbS5wcmljZSA8PSB2bS5tYXhQcmljZQogICAgICB9KQogICAgICB0aGlzLnNvcnRlZFByb2R1Y3RzID0gdGhpcy5zb3J0ZWRQcm9kdWN0cy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICB2bS5jaGVja2VkU2l6ZQogICAgICAgIHJldHVybiBpdGVtLmRpc3BsYXkgPT09IHZtLmNoZWNrZWRTaXplCiAgICAgIH0pCiAgICAgIGlmIChjYXRlZ29yeSkgewogICAgICAgIHRoaXMuc29ydGVkUHJvZHVjdHMgPSB0aGlzLnNvcnRlZFByb2R1Y3RzLmZpbHRlcihmdW5jdGlvbiAoZSkgewogICAgICAgICAgdm0uc2VsZWN0ZWQgPT09IGNhdGVnb3J5Lm5hbWU7CiAgICAgICAgICByZXR1cm4gZS5jYXRlZ29yeSA9PT0gY2F0ZWdvcnkubmFtZQogICAgICAgIH0pCiAgICAgIH0KICAgIH0sCiAgICBzZXRDaGVja1NpemUoKSB7CgogICAgfSwKICAgIGFkZFRvQ2FydChkYXRhKSB7CiAgICAgIHRoaXMuQUREX1RPX0NBUlQoZGF0YSkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICBsZXQgdGltZVN0YW1wID0gRGF0ZS5ub3coKS50b0xvY2FsZVN0cmluZygpOwogICAgICAgICAgdGhpcy5tZXNzYWdlcy51bnNoaWZ0KAogICAgICAgICAgICB7bmFtZTogJ9Ci0L7QstCw0YAg0LTQvtCx0LDQstC70LXQvSDQsiDQutC+0YDQt9C40L3RgycsIGljb246ICdjaGVja19jaXJjbGUnLCBpZDogdGltZVN0YW1wfQogICAgICAgICAgKQogICAgICAgIH0pCiAgICB9LAogICAgc29ydFByb2R1Y3RzQnlTZWFyY2hWYWx1ZSh2YWx1ZSkgewogICAgICB0aGlzLnNvcnRlZFByb2R1Y3RzID0gWy4uLnRoaXMuUFJPRFVDVFNdCiAgICAgIGlmICh2YWx1ZSkgewogICAgICAgIHRoaXMuc29ydGVkUHJvZHVjdHMgPSB0aGlzLnNvcnRlZFByb2R1Y3RzLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgcmV0dXJuIGl0ZW0ubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHZhbHVlLnRvTG93ZXJDYXNlKCkpCiAgICAgICAgfSkKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnNvcnRlZFByb2R1Y3RzID0gdGhpcy5QUk9EVUNUUzsKICAgICAgfQogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIFNFQVJDSF9WQUxVRSgpIHsKICAgICAgdGhpcy5zb3J0UHJvZHVjdHNCeVNlYXJjaFZhbHVlKHRoaXMuU0VBUkNIX1ZBTFVFKTsKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLkdFVF9QUk9EVUNUU19GUk9NX0FQSSgpCiAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIGlmIChyZXNwb25zZS5kYXRhKSB7CiAgICAgICAgICB0aGlzLnNvcnRCeUNhdGVnb3JpZXMoKQogICAgICAgICAgdGhpcy5zb3J0UHJvZHVjdHNCeVNlYXJjaFZhbHVlKHRoaXMuU0VBUkNIX1ZBTFVFKQogICAgICAgIH0KICAgICAgfSkKICB9Cn0K"},{"version":3,"sources":["v-catalog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgFA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"v-catalog.vue","sourceRoot":"src/components/catalog","sourcesContent":["<template>\n  <div class='v-catalog'>\n\n    <v-notification\n        :messages=\"messages\"\n    />\n\n    <router-link :to=\"{name: 'cart', params: {cart_data: CART}}\">\n      <div class=\"v-catalog__link_to_cart\">\n        <img src=\"../../assets/shopping-cart.png\" alt=\"\">\n        Cart: {{CART.length}}\n      </div>\n    </router-link>\n    <div class=\"filters\">\n      <v-select\n          :selected=\"selected\"\n          :options=\"categories\"\n          @select=\"sortByCategories\"\n      />\n\n      <label class=\"range-values\">\n        <p>Min: {{minPrice}}</p>\n        <div class=\"range-slider\">\n          <input\n              type=\"range\"\n              min=\"0\"\n              max=\"1000\"\n              step=\"10\"\n              v-model.number=\"minPrice\"\n              @change=\"setRangeSlider\"\n          >\n          <input\n              type=\"range\"\n              min=\"0\"\n              max=\"10000\"\n              step=\"10\"\n              v-model.number=\"maxPrice\"\n              @change=\"setRangeSlider\"\n          >\n        </div>\n        <p>Max: {{maxPrice}}</p>\n      </label>\n\n      <label class=\"\">\n        <div class=\"\">\n          <input\n              type=\"checkbox\"\n              value=\"16\"\n              v-model=\"checkedSize\"\n              @change=\"setCheckedSize\"\n          >16\n          <input\n              type=\"checkbox\"\n              value=\"15\"\n              v-model=\"checkedSize\"\n              @change=\"setCheckedSize\"\n          > 15\n          <input\n              type=\"checkbox\"\n              value=\"14\"\n              v-model=\"checkedSize\"\n              @change=\"setCheckedSize\"\n          > 14\n        </div>\n      </label>\n    </div>\n    <h1>Catalog</h1>\n    <div class=\"v-catalog__list\">\n      <v-catalog-item\n          v-for=\"product in filteredProducts\"\n          :key=\"product.article\"\n          :product_data=\"product\"\n          @addToCart=\"addToCart\"\n          @productClick=\"productClick\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\n  import vCatalogItem from './v-catalog-item'\n  import {mapActions, mapGetters} from 'vuex'\n  import vSelect from '../v-select'\n  import vNotification from '../notifications/v-notification'\n\n  export default {\n    name: \"v-catalog\",\n    components: {\n      vCatalogItem,\n      vSelect,\n      vNotification\n    },\n    props: {},\n    data() {\n      return {\n        categories: [\n          {name: 'Все', value: 'ALL'},\n          {name: 'Мужские', value: 'м'},\n          {name: 'Женские', value: 'ж'},\n        ],\n        selected: 'Все',\n        sortedProducts: [],\n        minPrice: 0,\n        maxPrice: 10000,\n        messages: [],\n        checkedSize: []\n      }\n    },\n    computed: {\n      ...mapGetters([\n        'PRODUCTS',\n        'CART',\n        'IS_MOBILE',\n        'IS_DESKTOP',\n        'SEARCH_VALUE'\n      ]),\n      filteredProducts() {\n        if (this.sortedProducts.length) {\n          return this.sortedProducts\n        } else {\n          return this.PRODUCTS\n        }\n      },\n    },\n    methods: {\n      ...mapActions([\n        'GET_PRODUCTS_FROM_API',\n        'ADD_TO_CART'\n      ]),\n      productClick(article) {\n        this.$router.push( {name: 'product', query: { 'product': article }})\n      },\n      setRangeSlider() {\n        if (this.minPrice > this.maxPrice) {\n          let tmp = this.maxPrice;\n          this.maxPrice = this.minPrice;\n          this.minPrice = tmp;\n        }\n        this.sortByCategories()\n      },\n      sortByCategories(category) {\n        let vm = this;\n        this.sortedProducts = [...this.PRODUCTS]\n        this.sortedProducts = this.sortedProducts.filter(function (item) {\n          return item.price >= vm.minPrice && item.price <= vm.maxPrice\n        })\n        this.sortedProducts = this.sortedProducts.filter(function (item) {\n          vm.checkedSize\n          return item.display === vm.checkedSize\n        })\n        if (category) {\n          this.sortedProducts = this.sortedProducts.filter(function (e) {\n            vm.selected === category.name;\n            return e.category === category.name\n          })\n        }\n      },\n      setCheckSize() {\n\n      },\n      addToCart(data) {\n        this.ADD_TO_CART(data)\n          .then(() => {\n            let timeStamp = Date.now().toLocaleString();\n            this.messages.unshift(\n              {name: 'Товар добавлен в корзину', icon: 'check_circle', id: timeStamp}\n            )\n          })\n      },\n      sortProductsBySearchValue(value) {\n        this.sortedProducts = [...this.PRODUCTS]\n        if (value) {\n          this.sortedProducts = this.sortedProducts.filter(function (item) {\n            return item.name.toLowerCase().includes(value.toLowerCase())\n          })\n        } else {\n          this.sortedProducts = this.PRODUCTS;\n        }\n      }\n    },\n    watch: {\n      SEARCH_VALUE() {\n        this.sortProductsBySearchValue(this.SEARCH_VALUE);\n      }\n    },\n    mounted() {\n      this.GET_PRODUCTS_FROM_API()\n        .then((response) => {\n          if (response.data) {\n            this.sortByCategories()\n            this.sortProductsBySearchValue(this.SEARCH_VALUE)\n          }\n        })\n    }\n  }\n</script>\n\n<style lang=\"scss\">\n  .v-catalog {\n    &__list {\n      display: flex;\n      flex-flow: row wrap;\n      justify-content: space-around;\n      align-items: center;\n    }\n\n    &__link_to_cart {\n      position: fixed;\n      top: 70px;\n      right: 10px;\n      padding: 16px 14px 10px 14px;\n      background: #ffffff;\n\n      img {\n        position: absolute;\n        width: 100px;\n        top: -12px;\n        right: -10px;\n      }\n    }\n  }\n\n  .filters {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    * {\n      border: 1px solid red;\n    }\n  }\n\n  .range-values {\n    display: flex;\n    justify-content: space-between;\n  }\n\n  .range-slider {\n    width: 132px;\n    margin: auto 16px;\n    text-align: center;\n    position: relative;\n  }\n\n  .range-slider svg, .range-slider input[type=range] {\n    position: absolute;\n    left: 0;\n    bottom: 0;\n  }\n\n  input[type=range]::-webkit-slider-thumb {\n    z-index: 2;\n    position: relative;\n    top: 2px;\n    margin-top: -7px;\n  }\n</style>\n"]}]}